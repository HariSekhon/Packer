# Hari Sekhon - HashiCorp Packer templates

[![GitHub stars](https://img.shields.io/github/stars/HariSekhon/Packer-templates?logo=github)](https://github.com/HariSekhon/Packer-templates/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/HariSekhon/Packer-templates?logo=github)](https://github.com/HariSekhon/Packer-templates/network)
[![Lines of Code](https://img.shields.io/badge/lines%20of%20code-1k-lightgrey?logo=codecademy)](https://github.com/HariSekhon/Packer-templates#Hari-Sekhon---Packer-templates)
[![License](https://img.shields.io/badge/license-MIT-green)](https://github.com/HariSekhon/Packer-templates/blob/master/LICENSE)
[![GitHub Last Commit](https://img.shields.io/github/last-commit/HariSekhon/Packer-templates?logo=github)](https://github.com/HariSekhon/Packer-templates/commits/master)

[![Codacy](https://app.codacy.com/project/badge/Grade/19fb3e1bf45f494fb7332d4829cb3cd6)](https://www.codacy.com/gh/HariSekhon/Packer-templates/dashboard)
[![CodeFactor](https://www.codefactor.io/repository/github/harisekhon/Packer-templates/badge)](https://www.codefactor.io/repository/github/harisekhon/Packer-templates)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_Packer-templates&metric=alert_status)](https://sonarcloud.io/dashboard?id=HariSekhon_Packer-templates)
[![Maintainability Rating](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_Packer-templates&metric=sqale_rating)](https://sonarcloud.io/dashboard?id=HariSekhon_Packer-templates)
[![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_Packer-templates&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=HariSekhon_Packer-templates)
[![Security Rating](https://sonarcloud.io/api/project_badges/measure?project=HariSekhon_Packer-templates&metric=security_rating)](https://sonarcloud.io/dashboard?id=HariSekhon_Packer-templates)

![HCL](https://img.shields.io/badge/Hashicorp%20Packer-HCL-blue)
[![Linux](https://img.shields.io/badge/OS-Linux-blue?logo=linux)](https://github.com/HariSekhon/DevOps-Bash-tools#hari-sekhon---devops-bash-tools)
[![Mac](https://img.shields.io/badge/OS-Mac-blue?logo=apple)](https://github.com/HariSekhon/DevOps-Bash-tools#hari-sekhon---devops-bash-tools)

[![Mac Homebrew](https://img.shields.io/badge/Mac-Homebrew-999999?logo=apple&logoColor=white)](https://brew.sh/)
[![CentOS](https://img.shields.io/badge/Linux-CentOS-262577?logo=centos&logoColor=white)](https://www.centos.org/)
[![Debian](https://img.shields.io/badge/Linux-Debian-A81D33?logo=debian)](https://www.debian.org/)
[![Fedora](https://img.shields.io/badge/Linux-Fedora-294172?logo=fedora&logoColor=white)](https://getfedora.org/)
[![Redhat](https://img.shields.io/badge/Linux-Redhat-EE0000?logo=red%20hat)](https://www.redhat.com/en)
[![Rocky](https://img.shields.io/badge/Linux-Rocky-10B981?logo=rockylinux&logoColor=white)](https://rockylinux.org/)
[![Ubuntu](https://img.shields.io/badge/Linux-Ubuntu-E95420?logo=ubuntu&logoColor=white)](https://ubuntu.com/)

[![Repo on Azure DevOps](https://img.shields.io/badge/repo-Azure%20DevOps-0078D7?logo=azure%20devops)](https://dev.azure.com/HariSekhon/GitHub/_git/Packer-templates)
[![Repo on GitHub](https://img.shields.io/badge/repo-GitHub-2088FF?logo=github)](https://github.com/HariSekhon/Packer-templates)
[![Repo on GitLab](https://img.shields.io/badge/repo-GitLab-FCA121?logo=gitlab)](https://gitlab.com/HariSekhon/Packer-templates)
[![Repo on BitBucket](https://img.shields.io/badge/repo-BitBucket-0052CC?logo=bitbucket)](https://bitbucket.org/HariSekhon/Packer-templates)

[![CI Builds Overview](https://img.shields.io/badge/CI%20Builds-Overview%20Page-blue?logo=circleci)](https://harisekhon.github.io/CI-CD/)
[![Validation](https://github.com/HariSekhon/Packer-templates/actions/workflows/validate.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/validate.yaml)
[![Kics](https://github.com/HariSekhon/Packer-templates/actions/workflows/kics.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/kics.yaml)
[![Grype](https://github.com/HariSekhon/Packer-templates/actions/workflows/grype.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/grype.yaml)
[![Semgrep](https://github.com/HariSekhon/Packer-templates/actions/workflows/semgrep.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/semgrep.yaml)
[![Semgrep Cloud](https://github.com/HariSekhon/Packer-templates/actions/workflows/semgrep-cloud.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/semgrep-cloud.yaml)
[![Trivy](https://github.com/HariSekhon/Packer-templates/actions/workflows/trivy.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/trivy.yaml)

[![HashiCorp Packer HCL](https://github.com/HariSekhon/Packer-templates/actions/workflows/packer.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/packer.yaml)
[![Redhat Kickstart](https://github.com/HariSekhon/Packer-templates/actions/workflows/kickstart.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/kickstart.yaml)
[![Debian Preseed](https://github.com/HariSekhon/Packer-templates/actions/workflows/preseed.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/preseed.yaml)
[![Ubuntu AutoInstall Cloud-Init](https://github.com/HariSekhon/Packer-templates/actions/workflows/autoinstall-user-data.yaml/badge.svg)](https://github.com/HariSekhon/Packer-templates/actions/workflows/autoinstall-user-data.yaml)

Packer templates for building portable OVA virtual machines images.

Useful for IoT edge sites, [Kubernetes](https://github.com/HariSekhon/Kubernetes-configs) base servers etc.

Bare metal servers can be installed using each Linux distro's native [automated installers](https://github.com/HariSekhon/Packer-templates/tree/main/installers).

Virtual Machines as appliances in portable OVA format are 100% automated using the installers above.

The primary templates are for the main Linux distributions:

- Ubuntu - using Ubuntu [AutoInstaller](https://github.com/HariSekhon/Packer-templates/blob/main/installers/autoinstall-user-data)
- Debian - using Debian [Preseeding](https://github.com/HariSekhon/Packer-templates/blob/main/installers/preseed.cfg)
- Redhat - using Redhat [Kickstart](https://github.com/HariSekhon/Packer-templates/blob/main/installers/anaconda-ks.cfg)
  - Redhat Enterprise Linux (RHEL)
  - CentOS (end-of-life)
  - Rocky Linux (CentOS replacement)
  - Fedora

VM OVA appliances can be created in any number of different virtualization systems supported by Packer.

You must install your virtualization system before running Packer.

The following builds are provided for these combinations of Linux distros, arches and virtualization systems:

- [VirtualBox](https://www.virtualbox.org/)
  - x86_64:
    - [debian-x86_64.vbox.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/debian-x86_64.vbox.pkr.hcl)
    - [fedora-x86_64.vbox.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/fedora-x86_64.vbox.pkr.hcl)
    - [rocky-x86_64.vbox.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/rocky-x86_64.vbox.pkr.hcl)
    - [ubuntu-x86_64.vbox.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/ubuntu-x86_64.vbox.pkr.hcl)
- [Qemu](https://www.qemu.org/)
  - x86_64:
    - [debian-x86_64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/debian-x86_64.qemu.pkr.hcl)
    - [fedora-x86_64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/fedora-x86_64.qemu.pkr.hcl)
    - [rocky-x86_64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/rocky-x86_64.qemu.pkr.hcl)
    - [ubuntu-x86_64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/ubuntu-x86_64.qemu.pkr.hcl)
  - arm64:
    - [debian-arm64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/debian-arm64.qemu.pkr.hcl)
    - [fedora-arm64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/fedora-arm64.qemu.pkr.hcl)
    - [rocky-arm64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/rocky-arm64.qemu.pkr.hcl)
    - [ubuntu-arm64.qemu.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/ubuntu-arm64.qemu.pkr.hcl)
- [Tart](https://tart.run/)
  - arm64:
    - [debian-arm64.tart.http.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/debian-arm64.tart.http.pkr.hcl)
    - [fedora-arm64.tart.http.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/fedora-arm64.tart.http.pkr.hcl)
    - [rocky-arm64.tart.http.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/rocky-arm64.tart.http.pkr.hcl)
    - [ubuntu-arm64.tart.http.pkr.hcl](https://github.com/HariSekhon/Packer-templates/blob/main/ubuntu-arm64.tart.http.pkr.hcl)

## Quick Start

Running `make <distro>` will build the portable virtual machine OVA for that Linux distribution 100% automated using that distro's native installer's automation method:

```shell
make debian
```

results in:

```
output-debian/debian.ova
output-debian/debian.md5
output-debian/debian.sha512
```

You can then just import the `debian.ova` file on any virtualization platform such as VMware vSphere or your local VirtualBox.


## Easy Customization

Tweak the corresponding text files for that distro eg.

```
*.pkr.hcl
installers/*
scripts/*
```
and then re-run

```shell
make <distro>
```
or for a specific build
```shell
make <distro>-<major_version>
```


## See Also

For tonnes of great free tech programs and scripts, see also:

- [DevOps Bash Tools](https://github.com/HariSekhon/DevOps-Bash-tools) - 1000+ DevOps Bash Scripts, Advanced `.bashrc`, `.vimrc`, `.screenrc`, `.tmux.conf`, `.gitconfig`, CI configs & Utility Code Library - AWS, GCP, Kubernetes, Docker, Kafka, Hadoop, SQL, BigQuery, Hive, Impala, PostgreSQL, MySQL, LDAP, DockerHub, Jenkins, Spotify API & MP3 tools, Git tricks, GitHub API, GitLab API, BitBucket API, Code & build linting, package management for Linux / Mac / Python / Perl / Ruby / NodeJS / Golang, and lots more random goodies

- [DevOps Python Tools](https://github.com/HariSekhon/DevOps-Python-tools) - 80+ DevOps CLI tools for AWS, GCP, Hadoop, HBase, Spark, Log Anonymizer, Ambari Blueprints, AWS CloudFormation, Linux, Docker, Spark Data Converters & Validators (Avro / Parquet / JSON / CSV / INI / XML / YAML), Elasticsearch, Solr, Travis CI, Pig, IPython

- [SQL Scripts](https://github.com/HariSekhon/SQL-scripts) - 100+ SQL Scripts - PostgreSQL, MySQL, AWS Athena, Google BigQuery

- [Jenkins](https://github.com/HariSekhon/Jenkins) - Advanced Jenkinsfile & Jenkins Groovy Shared Library

- [GitHub-Actions](https://github.com/HariSekhon/GitHub-Actions) - GitHub Actions master template & GitHub Actions Shared Workflows library

- [Templates](https://github.com/HariSekhon/Templates) - dozens of Code & Config templates - AWS, GCP, Docker, Jenkins, Terraform, Vagrant, Puppet, Python, Bash, Go, Perl, Java, Scala, Groovy, Maven, SBT, Gradle, Make, GitHub Actions Workflows, CircleCI, Jenkinsfile, Makefile, Dockerfile, docker-compose.yml, M4 etc.

- [Kubernetes configs](https://github.com/HariSekhon/Kubernetes-configs) - Kubernetes YAML configs - Best Practices, Tips & Tricks are baked right into the templates for future deployments

- [Terraform](https://github.com/HariSekhon/Terraform) - Terraform templates for AWS / GCP / Azure / GitHub management

- [The Advanced Nagios Plugins Collection](https://github.com/HariSekhon/Nagios-Plugins) - 450+ programs for Nagios monitoring your Hadoop & NoSQL clusters. Covers every Hadoop vendor's management API and every major NoSQL technology (HBase, Cassandra, MongoDB, Elasticsearch, Solr, Riak, Redis etc.) as well as message queues (Kafka, RabbitMQ), continuous integration (Jenkins, Travis CI) and traditional infrastructure (SSL, Whois, DNS, Linux)

- [Nagios Plugin Kafka](https://github.com/HariSekhon/Nagios-Plugin-Kafka) - Kafka API pub/sub Nagios Plugin written in Scala with Kerberos support

- [DevOps Perl Tools](https://github.com/harisekhon/perl-tools) - 25+ DevOps CLI tools for Hadoop, HDFS, Hive, Solr/SolrCloud CLI, Log Anonymizer, Nginx stats & HTTP(S) URL watchers for load balanced web farms, Dockerfiles & SQL ReCaser (MySQL, PostgreSQL, AWS Redshift, Snowflake, Apache Drill, Hive, Impala, Cassandra CQL, Microsoft SQL Server, Oracle, Couchbase N1QL, Dockerfiles, Pig Latin, Neo4j, InfluxDB), Ambari FreeIPA Kerberos, Datameer, Linux...

- [HAProxy Configs](https://github.com/HariSekhon/HAProxy-configs) - 80+ HAProxy Configs for Hadoop, Big Data, NoSQL, Docker, Elasticsearch, SolrCloud, HBase, Cloudera, Hortonworks, MapR, MySQL, PostgreSQL, Apache Drill, Hive, Presto, Impala, ZooKeeper, OpenTSDB, InfluxDB, Prometheus, Kibana, Graphite, SSH, RabbitMQ, Redis, Riak, Rancher etc.

- [Dockerfiles](https://github.com/HariSekhon/Dockerfiles) - 50+ DockerHub public images for Docker & Kubernetes - Hadoop, Kafka, ZooKeeper, HBase, Cassandra, Solr, SolrCloud, Presto, Apache Drill, Nifi, Spark, Mesos, Consul, Riak, OpenTSDB, Jython, Advanced Nagios Plugins & DevOps Tools repos on Alpine, CentOS, Debian, Fedora, Ubuntu, Superset, H2O, Serf, Alluxio / Tachyon, FakeS3

- [Diagrams-as-Code](https://github.com/HariSekhon/Diagrams-as-Code) - Cloud & Open Source architecture diagrams with Python & D2 source code provided - automatically regenerated via GitHub Actions CI/CD - AWS, GCP, Kubernetes, Jenkins, ArgoCD, Traefik, Kong API Gateway, Nginx, Redis, PostgreSQL, Kafka, Spark, web farms, event processing...

[Pre-built Docker images](https://hub.docker.com/u/harisekhon/) are available for those repos (which include this one as a submodule) and the ["docker available"](https://hub.docker.com/r/harisekhon/centos-github/)  icon above links to an [uber image](https://hub.docker.com/r/harisekhon/centos-github/) which contains all my github repos pre-built. There are [Centos](https://hub.docker.com/r/harisekhon/centos-github/), [Alpine](https://hub.docker.com/r/harisekhon/alpine-github/), [Debian](https://hub.docker.com/r/harisekhon/debian-github/) and [Ubuntu](https://hub.docker.com/r/harisekhon/ubuntu-github/) versions of this uber Docker image containing all repos.
